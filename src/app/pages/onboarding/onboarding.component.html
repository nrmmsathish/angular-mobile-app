<div class="onboarding-container">
  <!-- Header -->
  <div class="header">
    <button class="back-button" (click)="goBack()">
      <span class="back-icon">â€¹</span>
    </button>
    <h1 class="page-title">Investor profile</h1>
  </div>

  <!-- Hero Image -->
  <div class="hero-section">
    <div class="hero-image" (click)="openGamifiedOnboarding()">
      <img src="assets/images/mountain-journey.png" alt="Investment Journey" class="journey-illustration">
      
    </div>
  </div>

  <!-- Get Ready Section -->
  <div class="get-ready-section">
    <div class="progress-indicator">
      <span class="progress-text">{{completedSteps}}/{{totalSteps}}</span>
      <div class="current-stage">Stage {{getCurrentStage()}}: {{getCurrentStageName()}}</div>
    </div>
    <div class="status-badge">Not started</div>
    
    <h2 class="section-title">Get ready to invest!</h2>
    <p class="section-description">
      Complete your investor profile to open up a world of exciting wealth opportunities.
    </p>

    <!-- Gamified Option -->
    <div class="gamified-option">
      <div class="gamified-card" (click)="openGamifiedOnboarding()">
        <div class="gamified-icon">ðŸŽ®</div>
        <div class="gamified-content">
          <h4 class="gamified-title">Try Gamified Experience</h4>
          <p class="gamified-subtitle">Make onboarding fun with interactive challenges and rewards!</p>
        </div>
        <div class="gamified-arrow">â†’</div>
      </div>
    </div>
  </div>

  <!-- Personalise Section -->
  <div class="personalise-section">
    <h3 class="personalise-title">Personalise your Wealth journey</h3>
    <p class="personalise-description">
      Get started on your investor profile and save time in getting tailored 
      advice during your next investing with us.
    </p>

    <!-- Investment Journey Stages -->
    <div class="investment-journey">
      <div class="journey-header">
        <h4 class="journey-subtitle">Your Investment Journey Progress</h4>
        <div class="points-summary">
          <div class="points-badge">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12,2 15.09,8.26 22,9 17,14 18.18,21 12,17.77 5.82,21 7,14 2,9 8.91,8.26"/>
            </svg>
            <span>{{totalEarnedPoints}}/{{totalPossiblePoints}} Points</span>
          </div>
        </div>
      </div>
      
      <div class="journey-stages">
        <!-- Dynamic stages from investmentStages array -->
        <div 
          *ngFor="let stage of investmentStages; let i = index" 
          class="journey-stage"
          [class.completed]="stage.status === 'completed'"
          [class.in-progress]="stage.status === 'in-progress'"
          [class.pending]="stage.status === 'pending'"
          (click)="navigateToStage(stage.id)">
          
          <div class="stage-indicator">
            <div class="stage-icon" 
                 [class.completed]="stage.status === 'completed'"
                 [class.in-progress]="stage.status === 'in-progress'"
                 [class.pending]="stage.status === 'pending'">
              <!-- Completed icon -->
              <svg *ngIf="stage.status === 'completed'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 6L9 17L4 12"/>
              </svg>
              <!-- In progress spinner -->
              <div *ngIf="stage.status === 'in-progress'" class="progress-spinner"></div>
              <!-- Pending number -->
              <span *ngIf="stage.status === 'pending'">{{i + 1}}</span>
            </div>
            <div class="stage-line" *ngIf="i < investmentStages.length - 1"></div>
          </div>
          
          <div class="stage-content">
            <div class="stage-main">
              <h5 class="stage-title">{{stage.title}}</h5>
              <p class="stage-description">{{stage.description}}</p>
              
              <div class="stage-meta">
                <span class="stage-status" 
                      [class.completed]="stage.status === 'completed'"
                      [class.in-progress]="stage.status === 'in-progress'"
                      [class.pending]="stage.status === 'pending'">
                  {{stage.status === 'completed' ? 'Completed' : stage.status === 'in-progress' ? 'In Progress' : 'Pending'}}
                </span>
                
                <div class="stage-timing">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12,6 12,12 16,14"/>
                  </svg>
                  <span *ngIf="stage.timeTaken" class="time-taken">{{stage.timeTaken}}</span>
                  <span *ngIf="!stage.timeTaken" class="time-estimate">~{{stage.timeEstimate}}</span>
                </div>
                
                <div class="stage-points">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="12,2 15.09,8.26 22,9 17,14 18.18,21 12,17.77 5.82,21 7,14 2,9 8.91,8.26"/>
                  </svg>
                  <span *ngIf="stage.earnedPoints > 0" class="points-earned">+{{stage.earnedPoints}}</span>
                  <span *ngIf="stage.earnedPoints === 0" class="points-potential">+{{stage.rewardPoints}}</span>
                </div>
              </div>
            </div>
            
            <div *ngIf="stage.status === 'in-progress'" class="stage-actions">
              <button class="continue-btn" (click)="continueInvestmentReady($event)">
                Continue Setup
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="9,18 15,12 9,6"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>