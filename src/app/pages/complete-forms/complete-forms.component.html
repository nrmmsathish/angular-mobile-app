<div class="complete-forms-container">
  <!-- Header -->
  <div class="header">
    <button class="close-button" (click)="close()">
      <span class="close-icon">×</span>
    </button>
    <h1 class="page-title">Complete forms</h1>
  </div>

  <!-- Content -->
  <div class="content-section">
    <h2 class="main-title">Complete wealth forms</h2>
    <p class="description">
      Here you may use forms to provide new or update existing information before you invest with us. 
      <a href="#" class="link" (click)="viewRequiredForms()">View what respective form(s) is required.</a>
    </p>

    <!-- Form Sections -->
    <div class="form-sections">
      <div 
        *ngFor="let section of formSections" 
        class="form-section"
        [class.expanded]="section.isExpanded"
      >
        <!-- Section Header -->
        <div class="section-header" (click)="toggleSection(section.id)">
          <span class="expand-icon" [class.expanded]="section.isExpanded">
            {{ section.isExpanded ? '˅' : '˄' }}
          </span>
          <span class="section-title">{{ section.title }}</span>
        </div>

        <!-- Section Content -->
        <div class="section-content" *ngIf="section.isExpanded && section.items">
          <div 
            *ngFor="let item of section.items" 
            class="form-item"
          >
            <div class="item-header">
              <div class="item-info">
                <h4 class="item-title">{{ item.title }}</h4>
                <div class="item-status">
                  <span 
                    class="status-badge" 
                    [class.never-submitted]="item.status === 'never-submitted'"
                    [class.no-status]="item.status === 'no'"
                  >
                    <span class="status-icon">⚠</span>
                    <span class="status-text">
                      {{ item.status === 'never-submitted' ? 'Never submitted' : 
                         item.status === 'no' ? 'No' : item.status }}
                    </span>
                  </span>
                </div>
              </div>
              <div class="info-icon" *ngIf="item.hasInfo">ⓘ</div>
            </div>

            <div class="item-details">
              <div class="detail-row">
                <span class="detail-label">Last Update</span>
                <span class="detail-value">{{ item.lastUpdate || '-' }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Expiry Date</span>
                <span class="detail-value">{{ item.expiryDate || '-' }}</span>
              </div>
            </div>
          </div>

          <!-- Update Button for sections with items -->
          <div class="section-actions" *ngIf="section.items && section.items.length > 0">
            <button 
              class="update-button" 
              [class.updating]="isUpdating"
              [class.success]="showSuccessAnimation"
              (click)="updateForm()"
              [disabled]="isUpdating"
            >
              <span class="button-content" [class.hide]="isUpdating || showSuccessAnimation">
                Update
              </span>
              <span class="loading-spinner" [class.show]="isUpdating">
                <div class="spinner"></div>
                Updating...
              </span>
              <span class="success-content" [class.show]="showSuccessAnimation">
                <span class="success-icon">✅</span>
                Updated!
              </span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer Note -->
    <div class="footer-note">
      <p>If you want to submit or review a form, please click the appropriate "Update" button.</p>
    </div>

    <!-- Copyright -->
    <div class="copyright">
      <p>© Citi Group 2025</p>
    </div>
  </div>

  <!-- Success Animation Overlay -->
  <div class="success-overlay" *ngIf="showSuccessAnimation">
    <div class="success-animation">
      <div class="success-circle">
        <div class="success-checkmark">✓</div>
      </div>
      <h3 class="success-title">Form Updated Successfully!</h3>
      <p class="success-subtitle">Reward added to your gamified profile</p>
      <div class="success-points">+100 XP</div>
    </div>
  </div>
</div>